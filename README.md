# Summer-2022-Data-Science-Intern-Challenge
Author: Ding Pang

Email: dp3129@columbia.edu

LinkedIn: https://www.linkedin.com/in/ding-pang/

Link to repo: https://github.com/DingPang/Summer-2022-Data-Science-Intern-Challenge

# Question 1

## Answer

* A:
    * After playing with the dataset, it is obvious that the current AOV ($3145.13)was generated by taking the average of "order_amount". This deos not take into account of how many items/shoes are in each order.

    * If we fix the above problem, we would get an average price of $357.92. However, more investigations are needed to support this value, and it turns out this is not a good metric

* B:
    * After a deeper dive into the dataset, and visualizing its distribution, the price of sold shoes contain outliers(i.e we sold shoes that are $25725), and its mode is extremly frequent (i.e we sold 34063 pairs that are $352).

    * Shopify's clients are most likely sneaker shops (100 of them), instead of direct users/buyers, thus my intuition is to generate a metric that is usefull for the 100 shops.

    * I propose Trimmed Average Shop Item Value(TASIV), which is the mean of all shops' average item price. Adding a bit of clarification, this is a mean over other means (like a random forest to some extends). In addition to that, I also used 1.5 IQR rule to trim off some shops that are outliers. (See script.py: mymetrics() for detailed implementation).

* C:
    * The final value of TASIV is $150.22, which means an average shop's sneaker is sold at $150.22.

* Output Summary:
  ```sh
    AOV:3145.128
    Average Item Price:357.92152221412965

    Stats of Trimmed Average Shop Item Value Dataset:
    count     98.00000
    mean     150.22449
    std       23.91675
    min       90.00000
    25%      132.25000
    50%      153.00000
    75%      165.75000
    max      201.00000

    Trimmed Average Shop Item Value(TASIV):
    150.22448979591837
  ```


# Question 2
* A: How many orders were shipped by Speedy Express in total?
    * Query:
        ```
        SELECT
            COUNT(DISTINCT(OrderID)) AS Total_Order_Shipped
        FROM Orders
        WHERE ShipperID IS NOT NULL;
        ```
    * Result: 196

* B: What is the last name of the employee with the most orders?
    * Query:
        This output the full name, but it is short and efficient enough to manually parse the lastname (or code it in python).
        ```
        SELECT
            max(Number_of_Orders),
            CustomerName
        FROM (
            SELECT
                COUNT(O.OrderID) AS Number_of_Orders,
                C.CustomerName
            FROM Customers C
            JOIN ORDERS O
            ON O.CustomerID = C.CustomerID
            GROUP BY C.CustomerID, C.CustomerName
        );
        ```
    * Result: Handel

* C: What product was ordered the most by customers in Germany?

     * Query:
        ```
        SELECT
            max(amount),
            ProductName
        FROM (
            SELECT
                SUM(D.Quantity) AS amount,
                P.ProductName
            FROM Customers C
            JOIN ORDERS O
            ON O.CustomerID = C.CustomerID
            JOIN OrderDetails D
            ON D.OrderID = O.OrderID
            JOIN Products P
            ON P.ProductID = D.ProductID
            WHERE C.Country = "Germany"
            GROUP BY P.ProductName
        );
        ```
    * Result: Boston Crab Meat



